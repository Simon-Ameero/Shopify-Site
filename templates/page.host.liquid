<div class="loader">
  <div class="simple-spinner">
    <span></span>
  </div>
</div>
<div class="party-ribbon-error-message-container hidden">
  <div class="message"></div>
  <button type="button" class="party-ribbon-redirect-button">Home</button>
</div>

<style>
      .party-ribbon-error-message-container {
        background-color: #fff;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        text-align: center;
        margin: 100px;
      }
      .message {
        font-size: 18px;
        margin-bottom: 20px;
      }
      .party-ribbon-redirect-button {
        display: inline-block;
        padding: 12px 20px;
        background-color: #4c5f7f;
        color: #fff;
        border: none;
        border-radius: 2px;
        cursor: pointer;
      }

      .loader{
        position: fixed;
        top: 0;
        width: 100%;
        height: 100%;
        left: 0;
        background: rgba(0,0,0,0.65);
        z-index: 999;
    }

    .simple-spinner {
        width: 30px;
        height: 30px;
        position: absolute;
        left: 50%;
        top: 50%;
        transform: translate(-50%, -50%);
    }

    .simple-spinner span {
        display: block;
        width: 30px;
        height: 30px;
        border: 3px solid transparent;
        border-radius: 50%;
        border-right-color: rgba(255, 255, 255, 0.7);
        animation: spinner-anim 0.8s linear infinite;
    }

    @keyframes spinner-anim {
      from {
          transform: rotate(0);
      }
      to {
          transform: rotate(360deg);
      }
  }
</style>

<!-- JavaScript code to handle the button click -->
<script>
  // Get the party ID from the metafields
  const url =  window.location.href;
  const parts = url.split('?');
  const partyHandle = parts[1];

  // Set the party handle in the cookie
    sessionStorage.setItem("partyHandle", partyHandle);

  document.querySelector('.party-ribbon-redirect-button').addEventListener('click', (e) => {
        e.preventDefault(); // Prevent default button behavior

    // Remove the party ID from session storage
    sessionStorage.removeItem('partyId');

    // Redirect to the shop URL
    window.location.href = '{{ shop.url }}';
  });
</script>